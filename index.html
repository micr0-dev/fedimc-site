<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fedimc guide</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header>
        <h1>fedimc</h1>
    </header>
    <section id="intro">
        <h2>Welcome to fedimc~</h2>
        <p>welcome to the fedimc server! a community of cool fedi peeps having fun and playing mc. please follow the
            instructions below to set up your client and join the #fedimc community :3</p>
    </section>
    <section id="server-info">
        <h2>Live server info</h2>
        <img id="server-icon" style="display: none;" alt="Server Icon">
        <p><strong id="server-motd">N/A</strong></p>
        <p>Status: <strong id="server-status">Checking...</strong></p>
        <p>Players: <strong id="server-players">N/A</strong></p>
        <p>Online players: <strong id="active-players">N/A</strong></p>
    </section>
    <section id="player-count-graph">
        <h2>Player Count Over Time</h2>
        <canvas id="playerCountChart" width="400" height="200"></canvas>
    </section>
    <section id="rules">
        <h2>Server rules</h2>
        <pre>
1. be respectful.
2. no cheating.
3. no griefing.
4. attempt to resolve conflicts yourself prior to contacting micr0.
5. have fun!
to invite a friend to the server, contact micr0 with their fedi account and vouch for them!
~micr0</pre>
    </section>
    <section id="voice-chat">
        <h2>Voice chat</h2>
        <p>using voice chat to talk is encouraged on the server yet not required. if you would not like to talk please
            still install the mod to listen to others. to install the mod, follow the instructions below.</p>
    </section>
    <section id="gameplay">
        <h2>Gameplay</h2>
        <p>the server is a vanilla experience with a few quality of life mods. the server is on easy difficulty and
            pvp is enabled, and keep inventory is disabled! the server is a community server, so please be respectful
            and have fun! feel free to live with other people and form groups. spawn may be used as a communal area for
            the whole server to use such as for shopping. if you have any questions or concerns, feel free to reach out
            to micr0 on fedi. have fun!~ :3
        </p>
    </section>
    <section id="backups">
        <h2>Backups</h2>
        <p>backups are taken once a day at 02:00EDT. the server does restart at this time, so please be aware of this
            when playing. (its so quick that it doesn't even always disconnect you, it might just be a small lag spike)
        </p>
    </section>
    <section id="posting">
        <h2>Posting</h2>
        <p>if you would like to post about the server, please use the hashtag <strong>#fedimc</strong> on the fediverse.
            it is also encouraged to follow the <strong>#fedimc</strong> hashtag to see what other people are posting
            about the server! thank you!~ :3
        </p>
    </section>
    <section id="how-to-join">
        <h2>How to join</h2>
        <p>to become whitelisted and join the fedimc server, follow these steps:</p>
        <ol>
            <li>if you are a friend of a friend, have them vouch for you</li>
            <li>reach out to micr0</li>
            <li>provide your fedi account for a vibecheck and your minecraft username</li>
            <li>if micr0 approves, you'll be added to the whitelist, and you can join the server</li>
        </ol>
    </section>
    <section id="install-instructions">
        <h2>Prism Launcher installation instructions</h2>
        <ol>
            <li>download and install the <a href="https://prismlauncher.org">Prism Launcher</a>.</li>
            <li>download the modpack file from the <a href="https://modrinth.com/modpack/fedimc">Modrinth page</a>.
                (if
                modrinth has not approved the pack yet you can also download it <a
                    href="https://mc.micr0.dev/fedimc.mrpack">here</a>)
            </li>
            <li>open Prism Launcher and create a new instance.</li>
            <li>click on the 'Import' option and select the downloaded modpack <strong>.mrpack</strong> file.</li>
            <li>follow the on-screen instructions to import and set up the instance.</li>
            <li>launch the instance and join the server. at the ip
                <strong>mc.micr0.dev</strong> have fun!~ :3
            </li>
        </ol>
    </section>
    <section id="manual-install">
        <h2>Manual installation instructions</h2>
        <p>if you prefer a minimal install, follow these steps:</p>
        <ol>
            <li>download and install <a href="https://fabricmc.net/use/">Fabric Loader</a>.</li>
            <li>download and place the <a href="https://modrinth.com/mod/simple-voice-chat">Simple Voice Chat
                    Mod</a>
                into your mods folder.</li>
            <li>launch Minecraft with Fabric and connect to the server</li>
        </ol>
    </section>
    <section id="additional-mods">
        <h2>Additional modifications</h2>
        <p>if you would like to use additional quality of life or optimization mods, you can do that. however,
            please
            keep in mind mods that give you an unfair advantage are not allowed. </p>
        <p>here is an example of some mods that ARE allowed:</p>
        <ul>
            <li>Iris or any shaders</li>
            <li>Inventory Tweaks</li>
            <li>MiniHUD</li>
            <li>litematica/schematica</li>
            <li>Shulker Tooltip</li>
            <li>AppleSkin</li>
            <li>Mod Menu</li>
            <li>Waila</li>
            <li>Just Enough Items</li>
            <li><a href="https://modrinth.com/mod/xaeros-minimap-fair">Xaero's Minimap (Fair-Play)</a></li>
        </ul>
        <p>here is an example of some mods that are NOT allowed:</p>
        <ul>
            <li>X-Ray or other blatant cheats</li>
            <li>AutoClickers</li>
            <li>Minimaps that give unfair advantage (ie see caves)</li>
            <li>Xaero's Minimap</li>
            <li>tweakaroo</li>
        </ul>
        <p>if you have any questions about a mod, feel free to reach out to micr0 on fedi. have fun!~ :3</p>
    </section>
    <section id="server-ip">
        <h2>Server IP</h2>
        <p>the server ip is <strong>mc.micr0.dev</strong></p>
    </section>
    <section id="server-tech-details">
        <h2>Server technical details</h2>
        <p>the server is hosted on a private server with <a href="https://contabo.com/en-us/vps/">Contabo</a> and is
            running 4 vCPU cores and 6gb of RAM. the server is located in the United States (East) and your current
            average
            ping to it is <strong id="ping">Calculating...</strong>. the server is connected through a 300mbps
            connection. running Rocky Linux 9.4. the server is shared with another one of my projects that is
            currently
            in a invite-only phase, but will be open to the public soon!~ :3 if you are curious about an more
            technical
            details, feel free to reach out to micr0 on fedi! uwu
    </section>
    <section id="privacy-and-data-removal">
        <h2>Privacy and data removal</h2>
        <p>the server is hosted on a private server and does not collect any data other than playerdata collected by
            minecraft. if you would like your data removed,
            please contact micr0 on fedi. your data will be removed within 1 week of your request. (most likely
            faster)
            thank you!~ :3
        </p>
    </section>
    <section id="donations">
        <h2>Donations</h2>
        <p>if you would like to support the server, you can donate to help cover the servers costs. donations are
            not
            required but are appreciated! you can donate via the following methods:</p>
        <p>ko-fi (normies):</p>
        <a href="https://ko-fi.com/micr0byte" target="_blank" id="donate-button">Donate on Ko-fi</a>
        <p>Monero (privacy enthusiasts):
        <pre
            id="monero-wallet">44j6qAHAsaVDcw3suRULVGW2t1i812kXCVneVybtcCjZ7jGK2XcBRESFFVAFSx2KWJGzNYKwhWAvwU7mJU4AWb3oRYWD6vD</pre>
        </p>

        <footer>
            <p>for any questions, contact micr0 on fedi at <a href="https://wetdry.world/@micr0">@micr0@wetdry.world</a>
            </p>
        </footer>
        <script>
            function pingServer(callback) {
                var startTime = Date.now();

                fetch('https://mc.micr0.dev/api/ping')
                    .then(response => {
                        var endTime = Date.now();
                        var ping = endTime - startTime;
                        callback(ping);
                    })
                    .catch(error => console.error('Error:', error));
            }

            function averagePing(pingTimes) {
                var sum = pingTimes.reduce((a, b) => a + b, 0);
                return sum / pingTimes.length;
            }

            function measurePing() {
                var pingTimes = [];
                var numPings = 50;
                var interval = 100;

                function recordPing(ping) {
                    pingTimes.push(ping);
                    if (pingTimes.length === numPings) {
                        var avgPing = averagePing(pingTimes);
                        document.getElementById("ping").textContent = avgPing.toFixed(2) + "ms";
                    }
                }

                for (let i = 0; i < numPings; i++) {
                    setTimeout(() => pingServer(recordPing), i * interval);
                }
            }

            measurePing();

            function fetchServerInfo() {
                fetch('https://api.mcsrvstat.us/3/mc.micr0.dev')
                    .then(response => response.json())
                    .then(data => {
                        const serverStatus = document.getElementById('server-status');
                        const serverPlayers = document.getElementById('server-players');
                        const serverMotd = document.getElementById('server-motd');
                        const activePlayers = document.getElementById('active-players');
                        const serverIcon = document.getElementById('server-icon');

                        if (data.online) {
                            serverStatus.textContent = "Online";
                            serverPlayers.textContent = `${data.players.online} / ${data.players.max}`;
                            serverMotd.innerHTML = data.motd.html.join('<br>');

                            if (data.players.list && data.players.list.length > 0) {
                                activePlayers.innerHTML = data.players.list.map(player => player.name).join('<br>');
                            } else {
                                activePlayers.innerHTML = "No active players";
                            }

                            if (data.icon) {
                                serverIcon.src = data.icon;
                                serverIcon.style.display = "block";
                            }
                        } else {
                            serverStatus.textContent = "Offline";
                            serverPlayers.textContent = "N/A";
                            activePlayers.innerHTML = "N/A";
                            serverMotd.textContent = "N/A";
                            serverIcon.style.display = "none";
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching server info:', error);
                        document.getElementById('server-status').textContent = "Error";
                        document.getElementById('server-players').textContent = "N/A";
                        document.getElementById('active-players').innerHTML = "N/A";
                        document.getElementById('server-motd').textContent = "N/A";
                    });
            }

            fetchServerInfo();

            setInterval(fetchServerInfo, 60000);

            document.querySelectorAll('h2').forEach(header => {
                header.addEventListener('click', () => {
                    header.parentNode.scrollIntoView();
                    const url = `${window.location.pathname}#${header.parentNode.id}`;
                    window.location.href = url

                });
            });

            function fetchPlayerCountData() {
                fetch('https://mc.micr0.dev/minecraft_player_counts.json')
                    .then(response => response.json())
                    .then(data => {
                        renderPlayerCountChart(data);
                    })
                    .catch(error => console.error('Error fetching player count data:', error));
            }

            function renderPlayerCountChart(data) {
                const canvas = document.getElementById('playerCountChart');
                const ctx = canvas.getContext('2d');

                const timestamps = data.map(entry => new Date(entry.timestamp * 1000));
                const counts = data.map(entry => entry.count);

                // Clear the canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Draw the axes
                ctx.beginPath();
                ctx.moveTo(40, 10);
                ctx.lineTo(40, canvas.height - 40);
                ctx.lineTo(canvas.width - 10, canvas.height - 40);
                ctx.stroke();

                // Draw the labels
                ctx.font = '10px Arial';
                ctx.textAlign = 'center';
                timestamps.forEach((timestamp, index) => {
                    const x = 40 + (index / timestamps.length) * (canvas.width - 50);
                    const label = timestamp.getHours() + ':' + ("0" + timestamp.getMinutes()).slice(-2);
                    ctx.fillText(label, x, canvas.height - 25);
                });

                counts.forEach((count, index) => {
                    const y = canvas.height - 40 - (count / Math.max(...counts)) * (canvas.height - 50);
                    ctx.fillText(count, 25, y + 3);
                });

                // Draw the line
                ctx.beginPath();
                ctx.moveTo(
                    40,
                    canvas.height - 40 - (counts[0] / Math.max(...counts)) * (canvas.height - 50)
                );

                counts.forEach((count, index) => {
                    const x = 40 + (index / timestamps.length) * (canvas.width - 50);
                    const y = canvas.height - 40 - (count / Math.max(...counts)) * (canvas.height - 50);
                    ctx.lineTo(x, y);
                });

                ctx.stroke();
            }


            fetchPlayerCountData();

        </script>
</body>


</html>